SQLite format 3
-- SQLite format 3

-- Tạo bảng Movie
CREATE TABLE MOVIE (
    MovieID TEXT PRIMARY KEY,
    Title TEXT,
    Genre TEXT,
    Descriptions TEXT,
    Rating REAL
);

-- Tạo bảng Showtime
CREATE TABLE SHOWTIME (
    ShowTimeID TEXT PRIMARY KEY,
    MovieID TEXT,
    Date TEXT,
    StartTime TEXT,
    EndTime TEXT,
    FOREIGN KEY (MovieID) REFERENCES MOVIE(MovieID)
);

-- Tạo bảng SeatType
CREATE TABLE SEATTYPE (
    SeatType TEXT PRIMARY KEY,
    Price REAL
);

-- Tạo bảng Seat
CREATE TABLE SEAT (
    SeatID TEXT PRIMARY KEY,
    SeatType TEXT,
    Price REAL,
    FOREIGN KEY (SeatType) REFERENCES SEATTYPE(SeatType)
);

-- Tạo bảng Account
CREATE TABLE ACCOUNT (
    UserID TEXT PRIMARY KEY,
    Password TEXT,
    RoleUser TEXT,
    Gmail TEXT,
    PhoneNumber TEXT,
    UserName TEXT
);

-- Tạo bảng Booking
CREATE TABLE BOOKING (
    BookingID TEXT PRIMARY KEY,
    ShowTimeID TEXT,
    UserID TEXT,
    FOREIGN KEY (ShowTimeID) REFERENCES SHOWTIME(ShowTimeID),
    FOREIGN KEY (UserID) REFERENCES ACCOUNT(UserID)
);

-- Tạo bảng BookSeat
CREATE TABLE BOOKSEAT (
    BookingID TEXT,
    SeatID TEXT,
    PRIMARY KEY (BookingID, SeatID),
    FOREIGN KEY (BookingID) REFERENCES BOOKING(BookingID),
    FOREIGN KEY (SeatID) REFERENCES SEAT(SeatID)
);

-------------------------- THÊM DỮ LIỆU -----------------------------

-- Insert Movies
INSERT INTO MOVIE VALUES 
('101', 'Avengers', 'Action', 'A team of superheroes saving the world', 8.5),
('102', 'Titanic', 'Romance', 'A tragic love story on the doomed ship', 9.0);

-- Insert Showtimes
INSERT INTO SHOWTIME VALUES 
('201', '101', '2025-05-10', '18:00', '20:30'),
('202', '102', '2025-05-11', '20:00', '22:15');

-- Insert Seat Types
INSERT INTO SEATTYPE VALUES
('Single', 50.0),
('Double', 90.0);

-- Insert Seats
INSERT INTO SEAT VALUES 
('A1', 'Single', 50.0),
('A2', 'Single', 50.0),
('A3', 'Single', 50.0),
('B1', 'Double', 90.0),
('B2', 'Double', 90.0),
('B3', 'Double', 90.0);

-- Insert Accounts
INSERT INTO ACCOUNT VALUES 
('301', 'pass123', 'Customer', 'user1@gmail.com', '0912345678', 'John Nguyen'),
('302', 'admin456', 'Admin', 'admin@gmail.com', '0987654321', 'Anna Tran');

-- Insert Bookings
INSERT INTO BOOKING VALUES 
('401', '201', '301'),
('402', '202', '302');

-- Insert Booked Seats
INSERT INTO BOOKSEAT VALUES 
('401', 'A1'),
('401', 'A2'),
('402', 'B1');
