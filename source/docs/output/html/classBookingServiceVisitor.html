<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Movie Ticket Booking System: BookingServiceVisitor Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Movie Ticket Booking System<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">Object-Oriented Programming Project - Cinema Management System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('classBookingServiceVisitor.html','','classBookingServiceVisitor-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">BookingServiceVisitor Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Visitor implementation for role-based booking service access.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="BookingServiceVisitor_8h_source.html">visitor/BookingServiceVisitor.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for BookingServiceVisitor:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classBookingServiceVisitor.png" usemap="#BookingServiceVisitor_map" alt=""/>
  <map id="BookingServiceVisitor_map" name="BookingServiceVisitor_map">
<area href="classIServiceVisitor.html" title="Visitor interface for role-based service operations." alt="IServiceVisitor" shape="rect" coords="0,56,137,80"/>
<area href="classIVisitor.html" title="Base interface for all visitor implementations." alt="IVisitor" shape="rect" coords="0,0,137,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a34cadbdf82b36853ce670546954cb4e7" id="r_a34cadbdf82b36853ce670546954cb4e7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a34cadbdf82b36853ce670546954cb4e7">BookingServiceVisitor</a> ()</td></tr>
<tr class="memdesc:a34cadbdf82b36853ce670546954cb4e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor for <a class="el" href="classBookingServiceVisitor.html" title="Visitor implementation for role-based booking service access.">BookingServiceVisitor</a>.  <br /></td></tr>
<tr class="memitem:aa2c5c3daf805890aa8447d66319bc9b6" id="r_aa2c5c3daf805890aa8447d66319bc9b6"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classIBookingService.html">IBookingService</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa2c5c3daf805890aa8447d66319bc9b6">getBookingService</a> ()</td></tr>
<tr class="memdesc:aa2c5c3daf805890aa8447d66319bc9b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the booking service for authorized users.  <br /></td></tr>
<tr class="memitem:afb3c1cef5b3b20d4f72248091c3ee1f5" id="r_afb3c1cef5b3b20d4f72248091c3ee1f5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afb3c1cef5b3b20d4f72248091c3ee1f5">service</a> (std::shared_ptr&lt; <a class="el" href="classGuest.html">Guest</a> &gt; role) override</td></tr>
<tr class="memdesc:afb3c1cef5b3b20d4f72248091c3ee1f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes booking service access for <a class="el" href="classGuest.html" title="Implementation of IUserContext for anonymous guest users.">Guest</a> role.  <br /></td></tr>
<tr class="memitem:abd032cccf9bb0550d7854ce95de9ba1a" id="r_abd032cccf9bb0550d7854ce95de9ba1a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abd032cccf9bb0550d7854ce95de9ba1a">service</a> (std::shared_ptr&lt; <a class="el" href="classUser.html">User</a> &gt; role) override</td></tr>
<tr class="memdesc:abd032cccf9bb0550d7854ce95de9ba1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes booking service access for <a class="el" href="classUser.html" title="Concrete implementation of IUserContext for regular users.">User</a> role.  <br /></td></tr>
<tr class="memitem:aae4404a18b79292ba62d1b2dde789d14" id="r_aae4404a18b79292ba62d1b2dde789d14"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aae4404a18b79292ba62d1b2dde789d14">service</a> (std::shared_ptr&lt; <a class="el" href="classAdmin.html">Admin</a> &gt; role) override</td></tr>
<tr class="memdesc:aae4404a18b79292ba62d1b2dde789d14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes booking service access for <a class="el" href="classAdmin.html" title="Administrator user context with elevated privileges.">Admin</a> role.  <br /></td></tr>
<tr class="inherit_header pub_methods_classIVisitor"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_methods_classIVisitor')"><span class="dynarrow"><span class="arrowhead closed"></span></span>Public Member Functions inherited from <a class="el" href="classIVisitor.html">IVisitor</a></td></tr>
<tr class="memitem:a5ff8fd6d5159ff3fb828ed27dbf9e015 inherit pub_methods_classIVisitor" id="r_a5ff8fd6d5159ff3fb828ed27dbf9e015"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classIVisitor.html#a5ff8fd6d5159ff3fb828ed27dbf9e015">~IVisitor</a> ()=default</td></tr>
<tr class="memdesc:a5ff8fd6d5159ff3fb828ed27dbf9e015 inherit pub_methods_classIVisitor"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual destructor for proper inheritance.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pri-attribs" class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a21f239e2337ac7da54eb4866acf7ba23" id="r_a21f239e2337ac7da54eb4866acf7ba23"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classIBookingService.html">IBookingService</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a21f239e2337ac7da54eb4866acf7ba23">_service</a></td></tr>
<tr class="memdesc:a21f239e2337ac7da54eb4866acf7ba23"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="structBooking.html" title="Represents a movie ticket booking record.">Booking</a> service instance managed by this visitor.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Visitor implementation for role-based booking service access. </p>
<p>The <a class="el" href="classBookingServiceVisitor.html" title="Visitor implementation for role-based booking service access.">BookingServiceVisitor</a> class implements the Visitor pattern to provide role-based access control for booking services in the movie ticket booking system. This visitor manages access to booking functionality based on user roles, ensuring that only authorized users can perform booking operations.</p>
<p>Key Responsibilities:</p><ul>
<li>Implement role-based access control for booking services</li>
<li>Provide or restrict booking service access based on user roles</li>
<li>Maintain booking service instance through <a class="el" href="classServiceRegistry.html" title="Global registry for managing singleton service instances.">ServiceRegistry</a></li>
<li>Ensure security and authorization compliance</li>
</ul>
<p>Design Pattern: Visitor Pattern</p><ul>
<li>Implements <a class="el" href="classIServiceVisitor.html" title="Visitor interface for role-based service operations.">IServiceVisitor</a> interface</li>
<li>Provides double dispatch for role-specific service access</li>
<li>Enables extensible role-based authorization</li>
<li>Separates access control logic from service implementation</li>
</ul>
<p>Access Control Rules:</p><ul>
<li><a class="el" href="classGuest.html" title="Implementation of IUserContext for anonymous guest users.">Guest</a>: No access to booking services (must register/login first)</li>
<li><a class="el" href="classUser.html" title="Concrete implementation of IUserContext for regular users.">User</a>: Full access to booking services for personal bookings</li>
<li><a class="el" href="classAdmin.html" title="Administrator user context with elevated privileges.">Admin</a>: Full access to booking services including administrative operations</li>
</ul>
<p>Security Features:</p><ul>
<li>Role verification before service access</li>
<li>Centralized authorization logic</li>
<li>Fail-safe access control (deny by default)</li>
<li>Audit trail support through visitor pattern</li>
</ul>
<p>Usage Example: </p><div class="fragment"><div class="line"><span class="keyword">auto</span> bookingVisitor = std::make_unique&lt;BookingServiceVisitor&gt;();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// User requests booking service access</span></div>
<div class="line">userRole-&gt;accept(bookingVisitor.get());</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Get service if authorized</span></div>
<div class="line"><span class="keyword">auto</span> bookingService = bookingVisitor-&gt;getBookingService();</div>
<div class="line"><span class="keywordflow">if</span> (bookingService) {</div>
<div class="line">    <span class="comment">// User is authorized for booking operations</span></div>
<div class="line">    bookingService-&gt;createBooking(userId, showTimeId);</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="classIServiceVisitor.html" title="Visitor interface for role-based service operations.">IServiceVisitor</a> </dd>
<dd>
<a class="el" href="classIBookingService.html" title="Interface defining booking operations for movie tickets.">IBookingService</a> </dd>
<dd>
<a class="el" href="classServiceRegistry.html" title="Global registry for managing singleton service instances.">ServiceRegistry</a> </dd>
<dd>
<a class="el" href="classGuest.html" title="Implementation of IUserContext for anonymous guest users.">Guest</a>, <a class="el" href="classUser.html" title="Concrete implementation of IUserContext for regular users.">User</a>, <a class="el" href="classAdmin.html" title="Administrator user context with elevated privileges.">Admin</a> </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="BookingServiceVisitor_8h_source.html#l00073">73</a> of file <a class="el" href="BookingServiceVisitor_8h_source.html">BookingServiceVisitor.h</a>.</p>
</div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a34cadbdf82b36853ce670546954cb4e7" name="a34cadbdf82b36853ce670546954cb4e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34cadbdf82b36853ce670546954cb4e7">&#9670;&#160;</a></span>BookingServiceVisitor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BookingServiceVisitor::BookingServiceVisitor </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default constructor for <a class="el" href="classBookingServiceVisitor.html" title="Visitor implementation for role-based booking service access.">BookingServiceVisitor</a>. </p>
<p>Creates a new <a class="el" href="classBookingServiceVisitor.html" title="Visitor implementation for role-based booking service access.">BookingServiceVisitor</a> instance and initializes the booking service reference from the <a class="el" href="classServiceRegistry.html" title="Global registry for managing singleton service instances.">ServiceRegistry</a>. The visitor is ready to process role-based access requests after construction.</p>
<dl class="section post"><dt>Postcondition</dt><dd>Visitor is initialized with booking service from registry </dd>
<dd>
Service is ready to handle role-based access control</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::runtime_error</td><td>if <a class="el" href="classServiceRegistry.html" title="Global registry for managing singleton service instances.">ServiceRegistry</a> is not properly initialized </td></tr>
    <tr><td class="paramname">ServiceNotFoundException</td><td>if booking service is not registered</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Service is obtained from <a class="el" href="classServiceRegistry.html" title="Global registry for managing singleton service instances.">ServiceRegistry</a> during construction </dd>
<dd>
Visitor maintains service reference throughout its lifetime </dd></dl>

<p class="definition">Definition at line <a class="el" href="BookingServiceVisitor_8cpp_source.html#l00006">6</a> of file <a class="el" href="BookingServiceVisitor_8cpp_source.html">BookingServiceVisitor.cpp</a>.</p>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="aa2c5c3daf805890aa8447d66319bc9b6" name="aa2c5c3daf805890aa8447d66319bc9b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2c5c3daf805890aa8447d66319bc9b6">&#9670;&#160;</a></span>getBookingService()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="classIBookingService.html">IBookingService</a> &gt; BookingServiceVisitor::getBookingService </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves the booking service for authorized users. </p>
<p>Returns the booking service instance if the current user role has been authorized through a previous visit operation. This method provides access to booking functionality for qualified users.</p>
<dl class="section return"><dt>Returns</dt><dd>Shared pointer to booking service if authorized, nullptr otherwise</dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>Returns valid service pointer for authorized roles </dd>
<dd>
Returns nullptr for unauthorized access attempts</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Service access is determined by previous role visits </dd>
<dd>
Guests will receive nullptr (no booking access) </dd>
<dd>
Users and Admins receive valid service pointer</dd></dl>
<p>Usage: </p><div class="fragment"><div class="line"><span class="comment">// After role has visited this visitor</span></div>
<div class="line"><span class="keyword">auto</span> <a class="code hl_function" href="#afb3c1cef5b3b20d4f72248091c3ee1f5">service</a> = bookingVisitor-&gt;getBookingService();</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_function" href="#afb3c1cef5b3b20d4f72248091c3ee1f5">service</a>) {</div>
<div class="line">    <span class="comment">// User is authorized for booking operations</span></div>
<div class="line">    <span class="keyword">auto</span> bookings = <a class="code hl_function" href="#afb3c1cef5b3b20d4f72248091c3ee1f5">service</a>-&gt;viewAllBookings(userId);</div>
<div class="line">    <a class="code hl_function" href="#afb3c1cef5b3b20d4f72248091c3ee1f5">service</a>-&gt;createBooking(userId, showTimeId);</div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">    <span class="comment">// Access denied - user must login/register</span></div>
<div class="line">    showLoginPrompt();</div>
<div class="line">}</div>
<div class="ttc" id="aclassBookingServiceVisitor_html_afb3c1cef5b3b20d4f72248091c3ee1f5"><div class="ttname"><a href="#afb3c1cef5b3b20d4f72248091c3ee1f5">BookingServiceVisitor::service</a></div><div class="ttdeci">void service(std::shared_ptr&lt; Guest &gt; role) override</div><div class="ttdoc">Processes booking service access for Guest role.</div><div class="ttdef"><b>Definition</b> <a href="BookingServiceVisitor_8cpp_source.html#l00014">BookingServiceVisitor.cpp:14</a></div></div>
</div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="BookingServiceVisitor_8cpp_source.html#l00010">10</a> of file <a class="el" href="BookingServiceVisitor_8cpp_source.html">BookingServiceVisitor.cpp</a>.</p>

</div>
</div>
<a id="aae4404a18b79292ba62d1b2dde789d14" name="aae4404a18b79292ba62d1b2dde789d14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae4404a18b79292ba62d1b2dde789d14">&#9670;&#160;</a></span>service() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BookingServiceVisitor::service </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classAdmin.html">Admin</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>role</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel override">override</span><span class="mlabel virtual">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Processes booking service access for <a class="el" href="classAdmin.html" title="Administrator user context with elevated privileges.">Admin</a> role. </p>
<p>Handles booking service access request from Administrator accounts. Admins are authorized to access all booking services including both personal operations and administrative functions. This method grants comprehensive booking access to administrative users.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">role</td><td>Shared pointer to <a class="el" href="classAdmin.html" title="Administrator user context with elevated privileges.">Admin</a> role requesting service access</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>role must not be null </dd>
<dd>
<a class="el" href="classAdmin.html" title="Administrator user context with elevated privileges.">Admin</a> must be properly authenticated </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>Service access is granted for admin role </dd>
<dd>
Internal service pointer is set to valid booking service</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Admins get full access to all booking operations </dd>
<dd>
This includes both personal and administrative booking functions </dd>
<dd>
Subsequent <a class="el" href="#aa2c5c3daf805890aa8447d66319bc9b6" title="Retrieves the booking service for authorized users.">getBookingService()</a> calls will return valid service</dd></dl>
<p>Authorized Operations:</p><ul>
<li>All standard user booking operations</li>
<li>View all users' booking history (administrative)</li>
<li>Cancel any bookings (administrative)</li>
<li>Generate booking reports and statistics</li>
<li>Handle booking disputes and modifications</li>
</ul>
<p>Usage: </p><div class="fragment"><div class="line"><span class="keyword">auto</span> admin = std::make_shared&lt;Admin&gt;(accountInfo);</div>
<div class="line">bookingVisitor-&gt;service(admin);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Service is now available for admin operations</span></div>
<div class="line"><span class="keyword">auto</span> <a class="code hl_function" href="#afb3c1cef5b3b20d4f72248091c3ee1f5">service</a> = bookingVisitor-&gt;getBookingService();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Admin can perform both personal and administrative operations</span></div>
<div class="line"><a class="code hl_function" href="#afb3c1cef5b3b20d4f72248091c3ee1f5">service</a>-&gt;createBooking(admin-&gt;getId(), showTimeId);</div>
<div class="line"><span class="keyword">auto</span> allBookings = <a class="code hl_function" href="#afb3c1cef5b3b20d4f72248091c3ee1f5">service</a>-&gt;viewAllSystemBookings(); <span class="comment">// Admin function</span></div>
</div><!-- fragment --> 
<p>Implements <a class="el" href="classIServiceVisitor.html#a626c3c25ffb3b418913e79ea20e93fda">IServiceVisitor</a>.</p>

<p class="definition">Definition at line <a class="el" href="BookingServiceVisitor_8cpp_source.html#l00022">22</a> of file <a class="el" href="BookingServiceVisitor_8cpp_source.html">BookingServiceVisitor.cpp</a>.</p>

</div>
</div>
<a id="afb3c1cef5b3b20d4f72248091c3ee1f5" name="afb3c1cef5b3b20d4f72248091c3ee1f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb3c1cef5b3b20d4f72248091c3ee1f5">&#9670;&#160;</a></span>service() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BookingServiceVisitor::service </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classGuest.html">Guest</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>role</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel override">override</span><span class="mlabel virtual">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Processes booking service access for <a class="el" href="classGuest.html" title="Implementation of IUserContext for anonymous guest users.">Guest</a> role. </p>
<p>Handles booking service access request from <a class="el" href="classGuest.html" title="Implementation of IUserContext for anonymous guest users.">Guest</a> users. Guests are not authorized to access booking services as they must register or login to make reservations. This method enforces the security policy for anonymous users.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">role</td><td>Shared pointer to <a class="el" href="classGuest.html" title="Implementation of IUserContext for anonymous guest users.">Guest</a> role requesting service access</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>role must not be null </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>Service access is denied for guest role </dd>
<dd>
Internal service pointer remains null for guests</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Guests cannot access booking services due to security policy </dd>
<dd>
This enforces user registration/authentication requirements </dd>
<dd>
Subsequent <a class="el" href="#aa2c5c3daf805890aa8447d66319bc9b6" title="Retrieves the booking service for authorized users.">getBookingService()</a> calls will return nullptr</dd></dl>
<p>Security Policy:</p><ul>
<li><a class="el" href="structBooking.html" title="Represents a movie ticket booking record.">Booking</a> requires user authentication</li>
<li>Anonymous users cannot make reservations</li>
<li><a class="el" href="classGuest.html" title="Implementation of IUserContext for anonymous guest users.">Guest</a> access is logged for security monitoring</li>
</ul>
<p>Usage: </p><div class="fragment"><div class="line"><span class="keyword">auto</span> guest = std::make_shared&lt;Guest&gt;();</div>
<div class="line">bookingVisitor-&gt;service(guest);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Service will be null - guests cannot book</span></div>
<div class="line"><span class="keyword">auto</span> <a class="code hl_function" href="#afb3c1cef5b3b20d4f72248091c3ee1f5">service</a> = bookingVisitor-&gt;getBookingService();</div>
<div class="line">assert(<a class="code hl_function" href="#afb3c1cef5b3b20d4f72248091c3ee1f5">service</a> == <span class="keyword">nullptr</span>);</div>
</div><!-- fragment --> 
<p>Implements <a class="el" href="classIServiceVisitor.html#ab5cf1f7ca67ad6686753f623ecbc4e50">IServiceVisitor</a>.</p>

<p class="definition">Definition at line <a class="el" href="BookingServiceVisitor_8cpp_source.html#l00014">14</a> of file <a class="el" href="BookingServiceVisitor_8cpp_source.html">BookingServiceVisitor.cpp</a>.</p>

</div>
</div>
<a id="abd032cccf9bb0550d7854ce95de9ba1a" name="abd032cccf9bb0550d7854ce95de9ba1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd032cccf9bb0550d7854ce95de9ba1a">&#9670;&#160;</a></span>service() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BookingServiceVisitor::service </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classUser.html">User</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>role</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel override">override</span><span class="mlabel virtual">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Processes booking service access for <a class="el" href="classUser.html" title="Concrete implementation of IUserContext for regular users.">User</a> role. </p>
<p>Handles booking service access request from registered <a class="el" href="classUser.html" title="Concrete implementation of IUserContext for regular users.">User</a> accounts. Users are authorized to access booking services for personal ticket reservations and booking management. This method grants full booking access to authenticated users.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">role</td><td>Shared pointer to <a class="el" href="classUser.html" title="Concrete implementation of IUserContext for regular users.">User</a> role requesting service access</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>role must not be null </dd>
<dd>
<a class="el" href="classUser.html" title="Concrete implementation of IUserContext for regular users.">User</a> must be properly authenticated </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>Service access is granted for user role </dd>
<dd>
Internal service pointer is set to valid booking service</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Users get full access to personal booking operations </dd>
<dd>
This includes creating, viewing, and managing personal bookings </dd>
<dd>
Subsequent <a class="el" href="#aa2c5c3daf805890aa8447d66319bc9b6" title="Retrieves the booking service for authorized users.">getBookingService()</a> calls will return valid service</dd></dl>
<p>Authorized Operations:</p><ul>
<li>Create new bookings for showtimes</li>
<li>View personal booking history</li>
<li>Cancel personal bookings (if policy allows)</li>
<li>Select seats for reservations</li>
</ul>
<p>Usage: </p><div class="fragment"><div class="line"><span class="keyword">auto</span> user = std::make_shared&lt;User&gt;(accountInfo);</div>
<div class="line">bookingVisitor-&gt;service(user);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Service is now available for user operations</span></div>
<div class="line"><span class="keyword">auto</span> <a class="code hl_function" href="#afb3c1cef5b3b20d4f72248091c3ee1f5">service</a> = bookingVisitor-&gt;getBookingService();</div>
<div class="line"><a class="code hl_function" href="#afb3c1cef5b3b20d4f72248091c3ee1f5">service</a>-&gt;createBooking(user-&gt;getId(), showTimeId);</div>
</div><!-- fragment --> 
<p>Implements <a class="el" href="classIServiceVisitor.html#a5d9b340598de8b2e1fa4e7851867b198">IServiceVisitor</a>.</p>

<p class="definition">Definition at line <a class="el" href="BookingServiceVisitor_8cpp_source.html#l00018">18</a> of file <a class="el" href="BookingServiceVisitor_8cpp_source.html">BookingServiceVisitor.cpp</a>.</p>

</div>
</div>
<a name="doc-variable-members" id="doc-variable-members"></a><h2 id="header-doc-variable-members" class="groupheader">Member Data Documentation</h2>
<a id="a21f239e2337ac7da54eb4866acf7ba23" name="a21f239e2337ac7da54eb4866acf7ba23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21f239e2337ac7da54eb4866acf7ba23">&#9670;&#160;</a></span>_service</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classIBookingService.html">IBookingService</a>&gt; BookingServiceVisitor::_service</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="structBooking.html" title="Represents a movie ticket booking record.">Booking</a> service instance managed by this visitor. </p>
<p>Shared pointer to the booking service obtained from <a class="el" href="classServiceRegistry.html" title="Global registry for managing singleton service instances.">ServiceRegistry</a>. This service is made available to authorized roles through the visitor pattern implementation. </p>

<p class="definition">Definition at line <a class="el" href="BookingServiceVisitor_8h_source.html#l00082">82</a> of file <a class="el" href="BookingServiceVisitor_8h_source.html">BookingServiceVisitor.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>visitor/<a class="el" href="BookingServiceVisitor_8h_source.html">BookingServiceVisitor.h</a></li>
<li>visitor/<a class="el" href="BookingServiceVisitor_8cpp_source.html">BookingServiceVisitor.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="classBookingServiceVisitor.html">BookingServiceVisitor</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
